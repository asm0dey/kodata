
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
      
      
      <link rel="icon" href="../../../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.5.3, mkdocs-material-9.5.3">
    
    
      
        <title>Density Plot - My Docs</title>
      
    
    
      <link rel="stylesheet" href="../../../../../assets/stylesheets/main.50c56a3b.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.css">
    
    <script>__md_scope=new URL("../../../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
      
        <meta  property="og:type"  content="website" >
      
        <meta  property="og:title"  content="Density Plot - My Docs" >
      
        <meta  property="og:description"  content="None" >
      
        <meta  property="og:image"  content="./assets/images/social/kandy/docs/topics/guides/Density-Plot-Guide.png" >
      
        <meta  property="og:image:type"  content="image/png" >
      
        <meta  property="og:image:width"  content="1200" >
      
        <meta  property="og:image:height"  content="630" >
      
        <meta  property="og:url"  content="None" >
      
        <meta  name="twitter:card"  content="summary_large_image" >
      
        <meta  name="twitter:title"  content="Density Plot - My Docs" >
      
        <meta  name="twitter:description"  content="None" >
      
        <meta  name="twitter:image"  content="./assets/images/social/kandy/docs/topics/guides/Density-Plot-Guide.png" >
      
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#density-plot" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

<header class="md-header" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../../../.." title="My Docs" class="md-header__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            My Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Density Plot
            
          </span>
        </div>
      </div>
    </div>
    
    
      <script>var media,input,key,value,palette=__md_get("__palette");if(palette&&palette.color){"(prefers-color-scheme)"===palette.color.media&&(media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']"),palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent"));for([key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
        <div class="md-search__suggest" data-md-component="search-suggest"></div>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
            
<nav class="md-tabs" aria-label="Tabs" data-md-component="tabs">
  <div class="md-grid">
    <ul class="md-tabs__list">
      
        
  
  
  
    <li class="md-tabs__item">
      <a href="../../../../.." class="md-tabs__link">
        
  
    
  
  Home

      </a>
    </li>
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../dataforge-core/" class="md-tabs__link">
          
  
  Data Wrangling

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../kotlindl/" class="md-tabs__link">
          
  
  ML

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../kotlingrad/" class="md-tabs__link">
          
  
  Math

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../kaliningraph/" class="md-tabs__link">
          
  
  Plots

        </a>
      </li>
    
  

      
        
  
  
  
    
    
      <li class="md-tabs__item">
        <a href="../../../../../kalasim/" class="md-tabs__link">
          
  
  Other

        </a>
      </li>
    
  

      
    </ul>
  </div>
</nav>
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


  


<nav class="md-nav md-nav--primary md-nav--lifted" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../../../.." title="My Docs" class="md-nav__button md-logo" aria-label="My Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    My Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../.." class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Home
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Data Wrangling
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            Data Wrangling
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../dataforge-core/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    dataforge-core
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../controls-kt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Controls.kt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../kotlin-spark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kotlin for Apache® Spark™
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../dataframe/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kotlin DataFrame
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../tables-kt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Tables.kt
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="">
            
  
  <span class="md-ellipsis">
    ML
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            ML
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../kotlindl/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kotlindl
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../londogard-nlp-toolkit/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    londogard-nlp-toolkit
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../summarize-kt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    summarize-kt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../text-gen-kt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    text-gen-kt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../smile-nlp-kt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    smile-nlp-kt
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Math
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            Math
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../kotlingrad/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kotlin∇
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../kmath/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kmath
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../multik/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    multik
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Plots
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            Plots
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../kaliningraph/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kaliningraph
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kandy
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../kotlingrad/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kotlin∇
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../kravis/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kravis
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../lets-plot/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Lets-Plot Kotlin API
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../plotly-kt/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    plotly.kt
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../visionforge/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    DataForge Visualization Platform
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
      
      
    
    <li class="md-nav__item md-nav__item--section md-nav__item--nested">
      
        
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="">
            
  
  <span class="md-ellipsis">
    Other
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            Other
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../kalasim/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    kalasim
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../kotlin-jupyter/docs/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    Kotlin Kernel for IPython/Jupyter
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../../../../snark/" class="md-nav__link">
        
  
  <span class="md-ellipsis">
    snark
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#usage" class="md-nav__link">
    <span class="md-ellipsis">
      Usage
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#arguments" class="md-nav__link">
    <span class="md-ellipsis">
      Arguments
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Arguments">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#generalized-signature" class="md-nav__link">
    <span class="md-ellipsis">
      Generalized signature
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#output-statistics" class="md-nav__link">
    <span class="md-ellipsis">
      Output statistics
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#statdensity-plots" class="md-nav__link">
    <span class="md-ellipsis">
      StatDensity plots
    </span>
  </a>
  
    <nav class="md-nav" aria-label="StatDensity plots">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#statdensity-transform" class="md-nav__link">
    <span class="md-ellipsis">
      statDensity transform
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#densityplot-layer" class="md-nav__link">
    <span class="md-ellipsis">
      DensityPlot layer
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#densityplot-plot" class="md-nav__link">
    <span class="md-ellipsis">
      densityPlot plot
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#grouped-statdensity" class="md-nav__link">
    <span class="md-ellipsis">
      Grouped statDensity
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Grouped statDensity">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#inside-groupby-plot-context" class="md-nav__link">
    <span class="md-ellipsis">
      Inside groupBy{} plot context
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="density-plot">Density Plot</h1>
<p><web-summary>
Become proficient in creating density plot visualizations with Kandy.
This manual offers a detailed exploration into the creation and understanding of density plots,
giving you the ability to explicitly and efficiently represent data distributions.
</web-summary></p>
<p><card-summary>
Enhance your data analysis skills with Kandy's Density Plot guide.
Learn how to visualize and interpret data distributions for insightful analyses.
</card-summary></p>
<p><link-summary>
Explore Kandy's Density Plot guide for an in-depth understanding of data distributions.
This guide offers essential techniques for creating and analyzing density plots.
</link-summary></p>
<!---IMPORT org.jetbrains.kotlinx.kandy.letsplot.samples.guides.DensityPlot-->

<p>Statistics "density" are calculated on the sample of a single continuous variable.
It approximates the Probability Density Function (PDF) of this sample.
"Density" statistic samples this function point.
It's weighted, it means the counted density depends on observation weights.</p>
<p>This notebook uses definitions from <a href="https://kotlin.github.io/dataframe/overview.html">DataFrame</a>.</p>
<h2 id="usage">Usage</h2>
<p>"Density" statistic is useful when you have a large dataset,
and you want to understand the underlying probability distribution.
Density plot visualizes the PDF and also allows you to compare the distribution of different samples.
This is a useful alternative to the histogram for continuous data that comes from an underlying smooth distribution.</p>
<h2 id="arguments">Arguments</h2>
<ul>
<li>Input (mandatory):<ul>
<li><code>x</code> — numeric sample on which the statistics are calculated</li>
</ul>
</li>
<li>Weights (optional):<ul>
<li><code>weights</code> — set of weights of the same size as the input sample.
  <code>null</code> (by default) means all weights are equal to <code>1.0</code> and the weighted density is equal to the normal one</li>
</ul>
</li>
<li>Parameters (optional):<ul>
<li><code>n: Int</code> — number of sampled points;</li>
<li><code>trim: Boolean</code> — if <code>false</code>, each density is computed on the full range of the data,
  if <code>true</code>, each density is computed over the range of that group (only for grouped inputs).</li>
<li><code>adjust: Double</code> — adjusts the value of bandwidth by multiplying it; changes how smooth the frequency curve is.</li>
<li><code>kernel: Kernel</code> — the kernel used to calculate the density function:<ul>
<li><code>Kernel.GAUSSIAN</code></li>
<li><code>Kernel.RECTANGULAR</code></li>
<li><code>Kernel.TRIANGULAR</code></li>
<li><code>Kernel.BIWEIGHT</code></li>
<li><code>Kernel.EPANECHNIKOV</code></li>
<li><code>Kernel.OPTCOSINE</code></li>
</ul>
</li>
<li><code>fullScanMax: Int</code> — maximum size of data to use density computation with 'full scan'.
  For bigger data, less accurate but more efficient density computation is applied</li>
<li><code>bandWidth: BandWidth</code> — the method (or exact value) of bandwidth:<ul>
<li><code>BandWidth.Method.NRD</code></li>
<li><code>BandWidth.Method.NRD0</code></li>
<li><code>BandWidth.value(value: Double)</code></li>
</ul>
</li>
</ul>
</li>
</ul>
<h3 id="generalized-signature">Generalized signature</h3>
<p>The specific signature depends on the function,
but all functions related to "density"
statistic (which will be discussed further below — different variations of <code>statDensity()</code>, <code>densityPlot()</code>)
have approximately the same signature with the arguments above:</p>
<div class="language-text highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-0-1">1</a></span>
<span class="normal"><a href="#__codelineno-0-2">2</a></span>
<span class="normal"><a href="#__codelineno-0-3">3</a></span>
<span class="normal"><a href="#__codelineno-0-4">4</a></span>
<span class="normal"><a href="#__codelineno-0-5">5</a></span>
<span class="normal"><a href="#__codelineno-0-6">6</a></span>
<span class="normal"><a href="#__codelineno-0-7">7</a></span>
<span class="normal"><a href="#__codelineno-0-8">8</a></span>
<span class="normal"><a href="#__codelineno-0-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1"></a>statDensityArgs := 
<a id="__codelineno-0-2" name="__codelineno-0-2"></a>   x, 
<a id="__codelineno-0-3" name="__codelineno-0-3"></a>   weights = null,
<a id="__codelineno-0-4" name="__codelineno-0-4"></a>   n: Int = 512,
<a id="__codelineno-0-5" name="__codelineno-0-5"></a>   trim: Boolean = false,
<a id="__codelineno-0-6" name="__codelineno-0-6"></a>   adjust: Double = 1.0,
<a id="__codelineno-0-7" name="__codelineno-0-7"></a>   kernel: Kernel = Kernel.GAUSSIAN,
<a id="__codelineno-0-8" name="__codelineno-0-8"></a>   fullScanMax: Int = 5000,
<a id="__codelineno-0-9" name="__codelineno-0-9"></a>   bandWidth: BandWidth = BandWidth.Method.NRD0,
</code></pre></div></td></tr></table></div>
<p>The possible types of <code>x</code> and <code>weights</code> depend on where a certain function is used.
They can be simply <code>Iterable</code> (<code>List</code>, <code>Set</code>, etc.) or a reference to a column in a <code>DataFrame</code>
(<code>String</code>, <code>ColumnAccessor</code>) or the <code>DataColumn</code> itself.</p>
<h2 id="output-statistics">Output statistics</h2>
<table>
<thead>
<tr>
<th>name</th>
<th>type</th>
<th>description</th>
</tr>
</thead>
<tbody>
<tr>
<td>Stat.x</td>
<td>Double</td>
<td><code>x</code> coordinate</td>
</tr>
<tr>
<td>Stat.density</td>
<td>Double</td>
<td>Density estimate</td>
</tr>
<tr>
<td>Stat.densityWeighted</td>
<td>Double</td>
<td>Weighted density</td>
</tr>
<tr>
<td>Stat.scaled</td>
<td>Double</td>
<td>Density estimate, scaled to maximin of 1.0.</td>
</tr>
<tr>
<td>Stat.scaledWeighted</td>
<td>Double</td>
<td>Weighted scaled</td>
</tr>
</tbody>
</table>
<h2 id="statdensity-plots">StatDensity plots</h2>
<!---FUN guideDensityGenerateData-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-1-1">1</a></span>
<span class="normal"><a href="#__codelineno-1-2">2</a></span>
<span class="normal"><a href="#__codelineno-1-3">3</a></span>
<span class="normal"><a href="#__codelineno-1-4">4</a></span>
<span class="normal"><a href="#__codelineno-1-5">5</a></span>
<span class="normal"><a href="#__codelineno-1-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1"></a><span class="c1">// To generate the data, we use a standard java math library</span>
<a id="__codelineno-1-2" name="__codelineno-1-2"></a><span class="c1">// https://commons.apache.org/proper/commons-math/</span>
<a id="__codelineno-1-3" name="__codelineno-1-3"></a><span class="c1">// Generate sample from normal distribution</span>
<a id="__codelineno-1-4" name="__codelineno-1-4"></a><span class="kd">val</span><span class="w"> </span><span class="nv">depthList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NormalDistribution</span><span class="p">(</span><span class="m">500.0</span><span class="p">,</span><span class="w"> </span><span class="m">100.0</span><span class="p">).</span><span class="na">sample</span><span class="p">(</span><span class="m">1000</span><span class="p">).</span><span class="na">toList</span><span class="p">()</span>
<a id="__codelineno-1-5" name="__codelineno-1-5"></a><span class="c1">// Generate sample from uniform distribution</span>
<a id="__codelineno-1-6" name="__codelineno-1-6"></a><span class="kd">val</span><span class="w"> </span><span class="nv">coeffList</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">UniformRealDistribution</span><span class="p">(</span><span class="m">0.0</span><span class="p">,</span><span class="w"> </span><span class="m">1.0</span><span class="p">).</span><span class="na">sample</span><span class="p">(</span><span class="m">1000</span><span class="p">).</span><span class="na">toList</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<!---FUN guideDensityGatherDataIntoDf-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-2-1">1</a></span>
<span class="normal"><a href="#__codelineno-2-2">2</a></span>
<span class="normal"><a href="#__codelineno-2-3">3</a></span>
<span class="normal"><a href="#__codelineno-2-4">4</a></span>
<span class="normal"><a href="#__codelineno-2-5">5</a></span>
<span class="normal"><a href="#__codelineno-2-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1"></a><span class="c1">// Gather them into the DataFrame</span>
<a id="__codelineno-2-2" name="__codelineno-2-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">df</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataFrameOf</span><span class="p">(</span>
<a id="__codelineno-2-3" name="__codelineno-2-3"></a><span class="w">    </span><span class="s">&quot;depth&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">depthList</span><span class="p">,</span>
<a id="__codelineno-2-4" name="__codelineno-2-4"></a><span class="w">    </span><span class="s">&quot;coeff&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">coeffList</span>
<a id="__codelineno-2-5" name="__codelineno-2-5"></a><span class="p">)</span>
<a id="__codelineno-2-6" name="__codelineno-2-6"></a><span class="n">df</span><span class="p">.</span><span class="na">head</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<table>
<thead>
<tr>
<th>depth</th>
<th>coeff</th>
</tr>
</thead>
<tbody>
<tr>
<td>495.7</td>
<td>0.818</td>
</tr>
<tr>
<td>666.918</td>
<td>0.863</td>
</tr>
<tr>
<td>466.139</td>
<td>1</td>
</tr>
<tr>
<td>488.06</td>
<td>0.489</td>
</tr>
<tr>
<td>338.757</td>
<td>0.917</td>
</tr>
</tbody>
</table>
<p><code>df</code> has a signature</p>
<table>
<thead>
<tr>
<th>depth</th>
<th>coeff</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<p>Let's take a look at <code>StatDensity</code> output DataFrame:</p>
<!---FUN guideDensityStatDensity-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-3-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1"></a><span class="n">df</span><span class="p">.</span><span class="na">statDensity</span><span class="p">(</span><span class="s">&quot;depth&quot;</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;coeff&quot;</span><span class="p">).</span><span class="na">head</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<table>
<tr><td><b>Stat</b></td></tr>
<tr><td>
<table>
<tr><td>x</td><td>density</td><td>densityWeighted</td><td>scaled</td><td>scaledWeighted</td></tr>
<tr><td>181.351</td><td>0</td><td>0</td><td>0.011</td><td>0.015</td></tr>
<tr><td>182.64</td><td>0</td><td>0</td><td>0.012</td><td>0.016</td></tr>
<tr><td>183.929</td><td>0</td><td>0</td><td>0.012</td><td>0.016</td></tr>
<tr><td>185.218</td><td>0</td><td>0</td><td>0.012</td><td>0.017</td></tr>
<tr><td>186.506</td><td>0</td><td>0</td><td>0.013</td><td>0.017</td></tr>
</table>
</td></tr>
</table>

<p>It has the following signature:</p>
<table>
  <thead>
    <tr>
      <th alignt="left" colspan="5">Stat</th>
    </tr>
  </thead>
  <thead>
    <tr>
      <th>x</th>
      <th>density</th>
      <th>densityWeighted</th>
      <th>scaled</th>
      <th>scaledWeighted</th>
    </tr>
  </thead>
</table>

<p>As you can see, we got a <code>DataFrame</code> with one <code>ColumnGroup</code> called <code>Stat</code> which contains several columns with statics.
For <code>statDensity</code>, each row corresponds to one PDF point.
<code>Stat.x</code> is the column with this point <code>x</code> coordinate.
<code>Stat.density</code> contains the estimated density.
<code>Stat.densityWeighted</code> — weighted version of <code>density</code>.
<code>Stat.scaled</code> is a density scaled to a maximum of 1.0.
<code>Stat.scaledWeighted</code> — weighted version of <code>scaled</code>.
<code>DataFrame</code> with "density" statistics is called <code>StatDensityFrame</code></p>
<h3 id="statdensity-transform"><code>statDensity</code> transform</h3>
<p><code>statDensity(statDensityArgs) { /*new plotting context*/ }</code> modifies a plotting context —
instead of original data (no matter was it empty or not) new <code>StatDensity</code> dataset
(calculated on given arguments, inputs and weights can be provided as <code>Iterable</code> or as dataset column reference —
by name as a <code>String</code>, as a <code>ColumnReference</code> or as a <code>DataColumn</code>) is used inside a new context
(original dataset and primary context are not affected —
you can add layers using initial dataset outside the <code>statDensity</code> context).
Since the old dataset is irrelevant, we cannot use references for its columns.
But we can refer to the new ones.
They are all contained in the <code>Stat</code> group and can be called inside the new context:</p>
<!---FUN guideDensityStatDensityLinePlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-4-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-4-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-4-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-4-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-4-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-4-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-4-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-4-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-4-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-4-10">10</a></span>
<span class="normal"><a href="#__codelineno-4-11">11</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1"></a><span class="n">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-2" name="__codelineno-4-2"></a><span class="w">    </span><span class="n">statDensity</span><span class="p">(</span><span class="n">depthList</span><span class="p">,</span><span class="w"> </span><span class="n">adjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.2</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-3" name="__codelineno-4-3"></a><span class="w">        </span><span class="c1">// New `StatDensity` dataset here</span>
<a id="__codelineno-4-4" name="__codelineno-4-4"></a><span class="w">        </span><span class="n">line</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-4-5" name="__codelineno-4-5"></a><span class="w">            </span><span class="c1">// Use `Stat.*` columns for mappings</span>
<a id="__codelineno-4-6" name="__codelineno-4-6"></a><span class="w">            </span><span class="n">x</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">x</span><span class="p">)</span>
<a id="__codelineno-4-7" name="__codelineno-4-7"></a><span class="w">            </span><span class="n">y</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">density</span><span class="p">)</span>
<a id="__codelineno-4-8" name="__codelineno-4-8"></a><span class="w">            </span><span class="n">color</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">density</span><span class="p">)</span>
<a id="__codelineno-4-9" name="__codelineno-4-9"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-4-10" name="__codelineno-4-10"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-4-11" name="__codelineno-4-11"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="StatDensity Plot" src="guideDensityStatDensityLinePlot.svg" /></p>
<h3 id="densityplot-layer">DensityPlot layer</h3>
<p>Density plot is a statistical plot used for visualizing the distribution of continuous variables.
It's an area graph of kernel-estimated PDF.
So basically, we can build a histogram with <code>statDensity</code> as follows:</p>
<!---FUN guideDensityStatDensityAreaPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-5-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-5-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-5-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-5-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-5-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-5-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-5-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-5-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-5-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-5-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">statDensityAndAreaPlot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">df</span><span class="p">.</span><span class="na">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-2" name="__codelineno-5-2"></a><span class="w">    </span><span class="n">statDensity</span><span class="p">(</span><span class="s">&quot;depth&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-3" name="__codelineno-5-3"></a><span class="w">        </span><span class="n">area</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-5-4" name="__codelineno-5-4"></a><span class="w">            </span><span class="n">x</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">x</span><span class="p">)</span>
<a id="__codelineno-5-5" name="__codelineno-5-5"></a><span class="w">            </span><span class="n">y</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">density</span><span class="p">)</span>
<a id="__codelineno-5-6" name="__codelineno-5-6"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-5-7" name="__codelineno-5-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-5-8" name="__codelineno-5-8"></a><span class="w">    </span><span class="n">layout</span><span class="p">.</span><span class="na">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;`statDensity()` + `area()` layer&quot;</span>
<a id="__codelineno-5-9" name="__codelineno-5-9"></a><span class="p">}</span>
<a id="__codelineno-5-10" name="__codelineno-5-10"></a><span class="n">statDensityAndAreaPlot</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="StatDensity Area Plot" src="guideDensityStatDensityAreaPlot.svg" /></p>
<p>But we can do it even faster with <code>densityPlot(statDensityArgs)</code> method:</p>
<!---FUN guideDensityLayerPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-6-1">1</a></span>
<span class="normal"><a href="#__codelineno-6-2">2</a></span>
<span class="normal"><a href="#__codelineno-6-3">3</a></span>
<span class="normal"><a href="#__codelineno-6-4">4</a></span>
<span class="normal"><a href="#__codelineno-6-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1"></a><span class="kd">val</span><span class="w"> </span><span class="nv">densityLayerPlot</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-6-2" name="__codelineno-6-2"></a><span class="w">    </span><span class="n">densityPlot</span><span class="p">(</span><span class="n">depthList</span><span class="p">)</span>
<a id="__codelineno-6-3" name="__codelineno-6-3"></a><span class="w">    </span><span class="n">layout</span><span class="p">.</span><span class="na">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;`densityPlot()` layer&quot;</span>
<a id="__codelineno-6-4" name="__codelineno-6-4"></a><span class="p">}</span>
<a id="__codelineno-6-5" name="__codelineno-6-5"></a><span class="n">densityLayerPlot</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Density Plot" src="guideDensityLayerPlot.svg" /></p>
<p>Let's compare them:</p>
<!---FUN guideDensityStatDensityVsLayerPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-7-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1"></a><span class="n">plotGrid</span><span class="p">(</span><span class="n">listOf</span><span class="p">(</span><span class="n">statDensityAndAreaPlot</span><span class="p">,</span><span class="w"> </span><span class="n">densityLayerPlot</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Compare StatDensity Area vs Density Plot" src="guideDensityStatDensityVsLayerPlot.svg" /></p>
<p>These two plots are identical.
Indeed, <code>densityPlot</code> just uses <code>statDensity</code> and <code>area</code> and performs coordinate mappings under the hood.
And we can customize <code>densityPlot</code> layer: <code>densityPlot()</code> optionally opens a new context,
where we can configure bars (as in the usual context opened by <code>area { ... }</code>) —
even change coordinate mappings from default ones.
<code>StatDensity</code> dataset of <code>densityPlot</code> is also can be accessed here.</p>
<!---FUN guideDensityColorAndBorderLine-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-8-1">1</a></span>
<span class="normal"><a href="#__codelineno-8-2">2</a></span>
<span class="normal"><a href="#__codelineno-8-3">3</a></span>
<span class="normal"><a href="#__codelineno-8-4">4</a></span>
<span class="normal"><a href="#__codelineno-8-5">5</a></span>
<span class="normal"><a href="#__codelineno-8-6">6</a></span>
<span class="normal"><a href="#__codelineno-8-7">7</a></span>
<span class="normal"><a href="#__codelineno-8-8">8</a></span>
<span class="normal"><a href="#__codelineno-8-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1"></a><span class="n">df</span><span class="p">.</span><span class="na">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-2" name="__codelineno-8-2"></a><span class="w">    </span><span class="n">densityPlot</span><span class="p">(</span><span class="n">depth</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-8-3" name="__codelineno-8-3"></a><span class="w">        </span><span class="c1">// Change a column mapped on `y` to `Stat.scaled`</span>
<a id="__codelineno-8-4" name="__codelineno-8-4"></a><span class="w">        </span><span class="n">y</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">scaled</span><span class="p">)</span>
<a id="__codelineno-8-5" name="__codelineno-8-5"></a><span class="w">        </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.7</span>
<a id="__codelineno-8-6" name="__codelineno-8-6"></a><span class="w">        </span><span class="n">fillColor</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">RED</span>
<a id="__codelineno-8-7" name="__codelineno-8-7"></a><span class="w">        </span><span class="n">borderLine</span><span class="p">.</span><span class="na">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">BLACK</span>
<a id="__codelineno-8-8" name="__codelineno-8-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-8-9" name="__codelineno-8-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Scaled y-axis in Density Plot" src="guideDensityColorAndBorderLine.svg" /></p>
<p>If we specify weights, <code>Stat.densityWeighted</code> is mapped to <code>y</code> by default:</p>
<!---FUN guideDensityVLinePlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-9-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-9-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-9-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-9-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-9-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-9-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-9-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-9-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-9-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-9-10">10</a></span>
<span class="normal"><a href="#__codelineno-9-11">11</a></span>
<span class="normal"><a href="#__codelineno-9-12">12</a></span>
<span class="normal"><a href="#__codelineno-9-13">13</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1"></a><span class="n">df</span><span class="p">.</span><span class="na">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-2" name="__codelineno-9-2"></a><span class="w">    </span><span class="n">densityPlot</span><span class="p">(</span><span class="n">depth</span><span class="p">,</span><span class="w"> </span><span class="n">coeff</span><span class="p">,</span><span class="w"> </span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">700</span><span class="p">,</span><span class="w"> </span><span class="n">adjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span><span class="p">,</span><span class="w"> </span><span class="n">bandWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BandWidth</span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="m">17.0</span><span class="p">))</span>
<a id="__codelineno-9-3" name="__codelineno-9-3"></a><span class="w">    </span><span class="c1">// We can add other layers as well.</span>
<a id="__codelineno-9-4" name="__codelineno-9-4"></a><span class="w">    </span><span class="c1">// Let&#39;s add a horizontal mark line with constant y intercept:</span>
<a id="__codelineno-9-5" name="__codelineno-9-5"></a><span class="w">    </span><span class="n">vLine</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-9-6" name="__codelineno-9-6"></a><span class="w">        </span><span class="c1">// Count sample mean</span>
<a id="__codelineno-9-7" name="__codelineno-9-7"></a><span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">mean</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">depth</span><span class="p">.</span><span class="na">mean</span><span class="p">()</span>
<a id="__codelineno-9-8" name="__codelineno-9-8"></a><span class="w">        </span><span class="n">xIntercept</span><span class="p">.</span><span class="na">constant</span><span class="p">(</span><span class="n">mean</span><span class="p">)</span>
<a id="__codelineno-9-9" name="__codelineno-9-9"></a><span class="w">        </span><span class="n">tooltips</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">line</span><span class="p">(</span><span class="s">&quot;Depth mean: </span><span class="si">${</span><span class="kt">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;</span><span class="o">%</span><span class="p">.</span><span class="m">2f</span><span class="s">&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">mean</span><span class="p">)</span><span class="si">}</span><span class="s">m&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-9-10" name="__codelineno-9-10"></a><span class="w">        </span><span class="n">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">RED</span><span class="p">;</span><span class="w"> </span><span class="n">width</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">2.0</span>
<a id="__codelineno-9-11" name="__codelineno-9-11"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-9-12" name="__codelineno-9-12"></a><span class="w">    </span><span class="n">x</span><span class="p">.</span><span class="na">axis</span><span class="p">.</span><span class="na">name</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;depth, m&quot;</span>
<a id="__codelineno-9-13" name="__codelineno-9-13"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Density Plot with Mark Line" src="guideDensityVLinePlot.svg" /></p>
<h3 id="densityplot-plot"><code>densityPlot</code> plot</h3>
<p><code>densityPlot(statDensityArgs)</code> and <code>DataFrame.densityPlot(statDensityArgs)</code>
are a family of functions for fast plotting a density plot.</p>
<!---FUN guideDensitySimpleDensityPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-10-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1"></a><span class="n">densityPlot</span><span class="p">(</span><span class="n">depthList</span><span class="p">,</span><span class="w"> </span><span class="n">kernel</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Kernel</span><span class="p">.</span><span class="na">COSINE</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Density Plot" src="guideDensitySimpleDensityPlot.svg" /></p>
<!---FUN guideDensitySimpleDensityPlotOnDf-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-11-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-11-1" name="__codelineno-11-1"></a><span class="n">df</span><span class="p">.</span><span class="na">densityPlot</span><span class="p">(</span><span class="s">&quot;depth&quot;</span><span class="p">)</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Simple Density Plot" src="guideDensitySimpleDensityPlotOnDf.svg" /></p>
<p>In case you want to provide input and weights using column selection DSL,
it's a bit different from the usual one — you should assign <code>x</code>
input and (optionally) <code>weight</code> throw invocation eponymous functions:</p>
<!---FUN guideDensitySimpleDensityPlotWithWeight-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-12-1">1</a></span>
<span class="normal"><a href="#__codelineno-12-2">2</a></span>
<span class="normal"><a href="#__codelineno-12-3">3</a></span>
<span class="normal"><a href="#__codelineno-12-4">4</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-12-1" name="__codelineno-12-1"></a><span class="n">df</span><span class="p">.</span><span class="na">densityPlot</span><span class="p">(</span><span class="n">adjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-12-2" name="__codelineno-12-2"></a><span class="w">    </span><span class="n">x</span><span class="p">(</span><span class="n">depth</span><span class="p">)</span>
<a id="__codelineno-12-3" name="__codelineno-12-3"></a><span class="w">    </span><span class="n">weight</span><span class="p">(</span><span class="n">coeff</span><span class="p">)</span>
<a id="__codelineno-12-4" name="__codelineno-12-4"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Density Plot with Weight" src="guideDensitySimpleDensityPlotWithWeight.svg" /></p>
<p><code>densityPlot</code> plot can be configured with <code>.configure {}</code> extension — it opens context that combines area,
<code>StatDensity</code> and plot context.
That means you can configure bars settings, mappings using <code>StatDensity</code> dataset and any plot adjustments:</p>
<!---FUN guideDensityConfigureDensityPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-13-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-13-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-13-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-13-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-13-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-13-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-13-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-13-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-13-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-13-10">10</a></span>
<span class="normal"><a href="#__codelineno-13-11">11</a></span>
<span class="normal"><a href="#__codelineno-13-12">12</a></span>
<span class="normal"><a href="#__codelineno-13-13">13</a></span>
<span class="normal"><a href="#__codelineno-13-14">14</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-13-1" name="__codelineno-13-1"></a><span class="n">df</span><span class="p">.</span><span class="na">densityPlot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-2" name="__codelineno-13-2"></a><span class="w">    </span><span class="n">x</span><span class="p">(</span><span class="n">depth</span><span class="p">)</span>
<a id="__codelineno-13-3" name="__codelineno-13-3"></a><span class="p">}.</span><span class="na">configure</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-4" name="__codelineno-13-4"></a><span class="w">    </span><span class="c1">// Area + StatDensity + PlotContext</span>
<a id="__codelineno-13-5" name="__codelineno-13-5"></a><span class="w">    </span><span class="c1">// Can&#39;t add new layer</span>
<a id="__codelineno-13-6" name="__codelineno-13-6"></a><span class="w">    </span><span class="c1">// Can add area mapping, including for `Stat.*` columns</span>
<a id="__codelineno-13-7" name="__codelineno-13-7"></a><span class="w">    </span><span class="n">fillColor</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">scaled</span><span class="p">)</span><span class="w"> </span><span class="c1">// doesn&#39;t work properly for now</span>
<a id="__codelineno-13-8" name="__codelineno-13-8"></a><span class="w">    </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.6</span>
<a id="__codelineno-13-9" name="__codelineno-13-9"></a><span class="w">    </span><span class="c1">// Can configure general plot adjustments</span>
<a id="__codelineno-13-10" name="__codelineno-13-10"></a><span class="w">    </span><span class="n">layout</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-13-11" name="__codelineno-13-11"></a><span class="w">        </span><span class="n">title</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;Configured `densityPlot` plot&quot;</span>
<a id="__codelineno-13-12" name="__codelineno-13-12"></a><span class="w">        </span><span class="n">size</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">600</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="m">350</span>
<a id="__codelineno-13-13" name="__codelineno-13-13"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-13-14" name="__codelineno-13-14"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Configured Density Plot" src="guideDensityConfigureDensityPlot.svg" /></p>
<h2 id="grouped-statdensity">Grouped <code>statDensity</code></h2>
<p><code>statDensity</code> can be applied for grouped data —
statistics will be calculated on each group independently but with equal categories.
This application returns a new <code>GroupBy</code>
dataset with the same keys as the old one but with <code>StatDensity</code> groups instead of old ones.</p>
<!---FUN guideDensityGenerateGroupedData-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-14-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-14-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-14-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-14-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-14-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-14-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-14-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-14-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-14-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-14-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-14-1" name="__codelineno-14-1"></a><span class="c1">// Create two samples from normal distribution with different mean/std</span>
<a id="__codelineno-14-2" name="__codelineno-14-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">rangesA</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NormalDistribution</span><span class="p">(</span><span class="m">500.0</span><span class="p">,</span><span class="w"> </span><span class="m">100.0</span><span class="p">).</span><span class="na">sample</span><span class="p">(</span><span class="m">5000</span><span class="p">).</span><span class="na">toList</span><span class="p">()</span>
<a id="__codelineno-14-3" name="__codelineno-14-3"></a><span class="kd">val</span><span class="w"> </span><span class="nv">rangesB</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">NormalDistribution</span><span class="p">(</span><span class="m">400.0</span><span class="p">,</span><span class="w"> </span><span class="m">80.0</span><span class="p">).</span><span class="na">sample</span><span class="p">(</span><span class="m">5000</span><span class="p">).</span><span class="na">toList</span><span class="p">()</span>
<a id="__codelineno-14-4" name="__codelineno-14-4"></a>
<a id="__codelineno-14-5" name="__codelineno-14-5"></a><span class="c1">// Gather them into `DataFrame` with &quot;A&quot; and &quot;B&quot; keys in the &quot;category&quot; column</span>
<a id="__codelineno-14-6" name="__codelineno-14-6"></a><span class="kd">val</span><span class="w"> </span><span class="nv">rangesDF</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">dataFrameOf</span><span class="p">(</span>
<a id="__codelineno-14-7" name="__codelineno-14-7"></a><span class="w">    </span><span class="s">&quot;range&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">rangesA</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">rangesB</span><span class="p">,</span>
<a id="__codelineno-14-8" name="__codelineno-14-8"></a><span class="w">    </span><span class="s">&quot;category&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">List</span><span class="p">(</span><span class="m">5000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;A&quot;</span><span class="w"> </span><span class="p">}</span><span class="w"> </span><span class="o">+</span><span class="w"> </span><span class="n">List</span><span class="p">(</span><span class="m">5000</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="s">&quot;B&quot;</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-14-9" name="__codelineno-14-9"></a><span class="p">)</span>
<a id="__codelineno-14-10" name="__codelineno-14-10"></a><span class="n">rangesDF</span><span class="p">.</span><span class="na">head</span><span class="p">()</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<table>
<thead>
<tr>
<th>range</th>
<th>category</th>
</tr>
</thead>
<tbody>
<tr>
<td>503.671</td>
<td>A</td>
</tr>
<tr>
<td>560.585</td>
<td>A</td>
</tr>
<tr>
<td>525.12</td>
<td>A</td>
</tr>
<tr>
<td>488.74</td>
<td>A</td>
</tr>
<tr>
<td>357.084</td>
<td>A</td>
</tr>
</tbody>
</table>
<p>It has the following signature:</p>
<table>
<thead>
<tr>
<th>range</th>
<th>category</th>
</tr>
</thead>
<tbody>
<tr>
<td></td>
<td></td>
</tr>
</tbody>
</table>
<!---FUN guideDensityGroupingData-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-15-1">1</a></span>
<span class="normal"><a href="#__codelineno-15-2">2</a></span>
<span class="normal"><a href="#__codelineno-15-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-15-1" name="__codelineno-15-1"></a><span class="c1">// Group it by &quot;category&quot;</span>
<a id="__codelineno-15-2" name="__codelineno-15-2"></a><span class="kd">val</span><span class="w"> </span><span class="nv">groupedRangesDF</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">rangesDF</span><span class="p">.</span><span class="na">groupBy</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">category</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-15-3" name="__codelineno-15-3"></a><span class="n">groupedRangesDF</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<table>
<tr><td>category</td><td>group</td></tr>
<tr><td>A</td><td>
<table>
<tr><td>range</td><td>category</td></tr>
<tr><td>503.671</td><td>A</td></tr>
<tr><td>560.585</td><td>A</td></tr>
<tr><td>525.12</td><td>A</td></tr>
<tr><td>488.74</td><td>A</td></tr>
<tr><td>357.084</td><td>A</td></tr>
</table>
</td></tr>
<tr><td>B</td><td>
<table>
<tr><td>range</td><td>category</td></tr>
<tr><td>391.811</td><td>B</td></tr>
<tr><td>291.449</td><td>B</td></tr>
<tr><td>378.368</td><td>B</td></tr>
<tr><td>408.26</td><td>B</td></tr>
<tr><td>388.129</td><td>B</td></tr>
</table>
</td></tr>
</table>

<p>Now we have a <code>GroupBy</code> with a signature</p>
<table>
  <thead>
    <tr>
      <th>key: [category]</th>
      <th>group: DataFrame[range|category]</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>A</td>
      <td>A-Group</td>
    </tr>
    <tr>
      <td>B</td>
      <td>B-Group</td>
    </tr>
  </tbody>
</table>

<!---FUN guideDensityGroupedStatDensity-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-16-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-16-1" name="__codelineno-16-1"></a><span class="n">groupedRangesDF</span><span class="p">.</span><span class="na">statDensity</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">range</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<table>
<tr><td>category</td><td>group</td></tr>
<tr><td>A</td><td>
<table>
<tr><td>Stat</td></tr>
<tr><td>{ x: 107.258, density: 0, densityWeighted: 0, ... }</td></tr>
</table>
</td></tr>
<tr><td>B</td><td>
<table>
<tr><td>Stat</td></tr>
<tr><td>{ x: 117.39, density: 0, densityWeighted: 0, ... }</td></tr>
</table>
</td></tr>
</table>

<p>After <code>statDensity</code> applying it's still a <code>GroupBy</code> but with different signature of <code>group</code> -
all groups have the same signature as usual <code>DataFrame</code> after <code>statDensity</code> applying (i.e. <code>StatDensityFrame</code>):</p>
<table>
  <thead>
    <tr>
      <th>key: [drv]</th>
      <th>group: StaDensityFrame</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>"A"</td>
      <td>"A"-Group</td>
    </tr>
    <tr>
      <td>"B"</td>
      <td>"B"-Group</td>
    </tr>
  </tbody>
</table>

<p>As you can see, we did indeed do a <code>statDensity</code> transformation within groups, the grouping keys did not change.
The plotting process doesn't change much — we do everything the same.</p>
<!---FUN guideDensityGroupedStatDensityLinePlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-17-1">1</a></span>
<span class="normal"><a href="#__codelineno-17-2">2</a></span>
<span class="normal"><a href="#__codelineno-17-3">3</a></span>
<span class="normal"><a href="#__codelineno-17-4">4</a></span>
<span class="normal"><a href="#__codelineno-17-5">5</a></span>
<span class="normal"><a href="#__codelineno-17-6">6</a></span>
<span class="normal"><a href="#__codelineno-17-7">7</a></span>
<span class="normal"><a href="#__codelineno-17-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-17-1" name="__codelineno-17-1"></a><span class="n">groupedRangesDF</span><span class="p">.</span><span class="na">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-2" name="__codelineno-17-2"></a><span class="w">    </span><span class="n">statDensity</span><span class="p">(</span><span class="n">range</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-3" name="__codelineno-17-3"></a><span class="w">        </span><span class="n">line</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-17-4" name="__codelineno-17-4"></a><span class="w">            </span><span class="n">x</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">x</span><span class="p">)</span>
<a id="__codelineno-17-5" name="__codelineno-17-5"></a><span class="w">            </span><span class="n">y</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">density</span><span class="p">)</span>
<a id="__codelineno-17-6" name="__codelineno-17-6"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-17-7" name="__codelineno-17-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-17-8" name="__codelineno-17-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="StatDensity Grouped Line" src="guideDensityGroupedStatDensityLinePlot.svg" /></p>
<p>As you can see, there are two lines because we have two groups of data.
To distinguish them, we need to add mapping to the color from the key.
This is convenient — the key is available in the context</p>
<!---FUN guideDensityGrStatDensityLinePlotWithColor-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-18-1">1</a></span>
<span class="normal"><a href="#__codelineno-18-2">2</a></span>
<span class="normal"><a href="#__codelineno-18-3">3</a></span>
<span class="normal"><a href="#__codelineno-18-4">4</a></span>
<span class="normal"><a href="#__codelineno-18-5">5</a></span>
<span class="normal"><a href="#__codelineno-18-6">6</a></span>
<span class="normal"><a href="#__codelineno-18-7">7</a></span>
<span class="normal"><a href="#__codelineno-18-8">8</a></span>
<span class="normal"><a href="#__codelineno-18-9">9</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-18-1" name="__codelineno-18-1"></a><span class="n">groupedRangesDF</span><span class="p">.</span><span class="na">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-2" name="__codelineno-18-2"></a><span class="w">    </span><span class="n">statDensity</span><span class="p">(</span><span class="n">range</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-3" name="__codelineno-18-3"></a><span class="w">        </span><span class="n">line</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-18-4" name="__codelineno-18-4"></a><span class="w">            </span><span class="n">x</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">x</span><span class="p">)</span>
<a id="__codelineno-18-5" name="__codelineno-18-5"></a><span class="w">            </span><span class="n">y</span><span class="p">(</span><span class="n">Stat</span><span class="p">.</span><span class="na">density</span><span class="p">)</span>
<a id="__codelineno-18-6" name="__codelineno-18-6"></a><span class="w">            </span><span class="n">color</span><span class="p">(</span><span class="n">category</span><span class="p">)</span>
<a id="__codelineno-18-7" name="__codelineno-18-7"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-18-8" name="__codelineno-18-8"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-18-9" name="__codelineno-18-9"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="StatDensity Grouped Line with Color" src="guideDensityGrStatDensityLinePlotWithColor.svg" /></p>
<p>The <code>densityPlot()</code> layer also works.
Moreover, if we have exactly one grouping key, a mapping from it to <code>fillColor</code>
and <code>borderLine.color</code> will be created by default.</p>
<!---FUN guideDensityGroupedDensityPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-19-1">1</a></span>
<span class="normal"><a href="#__codelineno-19-2">2</a></span>
<span class="normal"><a href="#__codelineno-19-3">3</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-19-1" name="__codelineno-19-1"></a><span class="n">groupedRangesDF</span><span class="p">.</span><span class="na">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-19-2" name="__codelineno-19-2"></a><span class="w">    </span><span class="n">densityPlot</span><span class="p">(</span><span class="n">range</span><span class="p">)</span>
<a id="__codelineno-19-3" name="__codelineno-19-3"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Grouped Density Plot" src="guideDensityGroupedDensityPlot.svg" /></p>
<p>We can customize it like we used to. From the differences — access to <code>key</code> columns:</p>
<!---FUN guideDensityCustomizeGroupedDensityPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-20-1"> 1</a></span>
<span class="normal"><a href="#__codelineno-20-2"> 2</a></span>
<span class="normal"><a href="#__codelineno-20-3"> 3</a></span>
<span class="normal"><a href="#__codelineno-20-4"> 4</a></span>
<span class="normal"><a href="#__codelineno-20-5"> 5</a></span>
<span class="normal"><a href="#__codelineno-20-6"> 6</a></span>
<span class="normal"><a href="#__codelineno-20-7"> 7</a></span>
<span class="normal"><a href="#__codelineno-20-8"> 8</a></span>
<span class="normal"><a href="#__codelineno-20-9"> 9</a></span>
<span class="normal"><a href="#__codelineno-20-10">10</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-20-1" name="__codelineno-20-1"></a><span class="n">groupedRangesDF</span><span class="p">.</span><span class="na">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-2" name="__codelineno-20-2"></a><span class="w">    </span><span class="n">densityPlot</span><span class="p">(</span><span class="n">range</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-3" name="__codelineno-20-3"></a><span class="w">        </span><span class="c1">// Customize scale of default mapping</span>
<a id="__codelineno-20-4" name="__codelineno-20-4"></a><span class="w">        </span><span class="n">fillColor</span><span class="p">(</span><span class="n">category</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-20-5" name="__codelineno-20-5"></a><span class="w">            </span><span class="n">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">categorical</span><span class="p">(</span><span class="s">&quot;A&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">GREEN</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;B&quot;</span><span class="w"> </span><span class="n">to</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">ORANGE</span><span class="p">)</span>
<a id="__codelineno-20-6" name="__codelineno-20-6"></a><span class="w">        </span><span class="p">}</span>
<a id="__codelineno-20-7" name="__codelineno-20-7"></a><span class="w">        </span><span class="n">borderLine</span><span class="p">.</span><span class="na">color</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Color</span><span class="p">.</span><span class="na">BLACK</span>
<a id="__codelineno-20-8" name="__codelineno-20-8"></a><span class="w">        </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.5</span>
<a id="__codelineno-20-9" name="__codelineno-20-9"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-20-10" name="__codelineno-20-10"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Customized Density Plot" src="guideDensityCustomizeGroupedDensityPlot.svg" /></p>
<p>Also, we can stack areas (for that we need <code>x</code> coordinates to match — use <code>trim = true</code>):</p>
<!---FUN guideDensityStackDensityPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-21-1">1</a></span>
<span class="normal"><a href="#__codelineno-21-2">2</a></span>
<span class="normal"><a href="#__codelineno-21-3">3</a></span>
<span class="normal"><a href="#__codelineno-21-4">4</a></span>
<span class="normal"><a href="#__codelineno-21-5">5</a></span>
<span class="normal"><a href="#__codelineno-21-6">6</a></span>
<span class="normal"><a href="#__codelineno-21-7">7</a></span>
<span class="normal"><a href="#__codelineno-21-8">8</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-21-1" name="__codelineno-21-1"></a><span class="n">groupedRangesDF</span><span class="p">.</span><span class="na">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-2" name="__codelineno-21-2"></a><span class="w">    </span><span class="c1">// Use trim</span>
<a id="__codelineno-21-3" name="__codelineno-21-3"></a><span class="w">    </span><span class="n">densityPlot</span><span class="p">(</span><span class="n">range</span><span class="p">,</span><span class="w"> </span><span class="n">trim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-21-4" name="__codelineno-21-4"></a><span class="w">        </span><span class="c1">// Adjust position of areas from different groups</span>
<a id="__codelineno-21-5" name="__codelineno-21-5"></a><span class="w">        </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Position</span><span class="p">.</span><span class="na">stack</span><span class="p">()</span>
<a id="__codelineno-21-6" name="__codelineno-21-6"></a><span class="w">        </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.8</span>
<a id="__codelineno-21-7" name="__codelineno-21-7"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-21-8" name="__codelineno-21-8"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Stacked Density Plot" src="guideDensityStackDensityPlot.svg" /></p>
<p><code>densityPlot</code> plot for <code>GroupBy</code> (i.e. <code>GroupBy.densityPlot(statDensityArgs)</code> extensions) works as well:</p>
<!---FUN guideDensitySimpleGroupedDensityPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-22-1">1</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-22-1" name="__codelineno-22-1"></a><span class="n">groupedRangesDF</span><span class="p">.</span><span class="na">densityPlot</span><span class="p">(</span><span class="s">&quot;range&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">bandWidth</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">BandWidth</span><span class="p">.</span><span class="na">value</span><span class="p">(</span><span class="m">10.0</span><span class="p">))</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Density Plot by Range" src="guideDensitySimpleGroupedDensityPlot.svg" /></p>
<p>... and can be configured the same way:</p>
<!---FUN guideDensityConfigureSimpleGroupedDensityPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-23-1">1</a></span>
<span class="normal"><a href="#__codelineno-23-2">2</a></span>
<span class="normal"><a href="#__codelineno-23-3">3</a></span>
<span class="normal"><a href="#__codelineno-23-4">4</a></span>
<span class="normal"><a href="#__codelineno-23-5">5</a></span>
<span class="normal"><a href="#__codelineno-23-6">6</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-23-1" name="__codelineno-23-1"></a><span class="n">groupedRangesDF</span><span class="p">.</span><span class="na">densityPlot</span><span class="p">(</span><span class="n">n</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">750</span><span class="p">,</span><span class="w"> </span><span class="n">trim</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w"> </span><span class="n">adjust</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.75</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">x</span><span class="p">(</span><span class="n">range</span><span class="p">)</span><span class="w"> </span><span class="p">}.</span><span class="na">configure</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-23-2" name="__codelineno-23-2"></a><span class="w">    </span><span class="n">alpha</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="m">0.6</span>
<a id="__codelineno-23-3" name="__codelineno-23-3"></a><span class="w">    </span><span class="n">position</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">Position</span><span class="p">.</span><span class="na">stack</span><span class="p">()</span>
<a id="__codelineno-23-4" name="__codelineno-23-4"></a><span class="w">    </span><span class="c1">// Can access key column by name as `String`</span>
<a id="__codelineno-23-5" name="__codelineno-23-5"></a><span class="w">    </span><span class="n">fillColor</span><span class="p">(</span><span class="s">&quot;category&quot;</span><span class="p">)</span><span class="w"> </span><span class="p">{</span><span class="w"> </span><span class="n">scale</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">categoricalColorBrewer</span><span class="p">(</span><span class="n">BrewerPalette</span><span class="p">.</span><span class="na">Qualitative</span><span class="p">.</span><span class="na">Dark2</span><span class="p">)</span><span class="w"> </span><span class="p">}</span>
<a id="__codelineno-23-6" name="__codelineno-23-6"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="Configured Density Plot" src="guideDensityConfigureSimpleGroupedDensityPlot.svg" /></p>
<h3 id="inside-groupby-plot-context">Inside <code>groupBy{}</code> plot context</h3>
<p>We can apply <code>groupBy</code> modification to the initial dataset and build a density plot with grouped data the same way:</p>
<!---FUN guideDensityGroupByDensityPlot-->

<div class="language-kotlin highlight"><table class="highlighttable"><tr><td class="linenos"><div class="linenodiv"><pre><span></span><span class="normal"><a href="#__codelineno-24-1">1</a></span>
<span class="normal"><a href="#__codelineno-24-2">2</a></span>
<span class="normal"><a href="#__codelineno-24-3">3</a></span>
<span class="normal"><a href="#__codelineno-24-4">4</a></span>
<span class="normal"><a href="#__codelineno-24-5">5</a></span></pre></div></td><td class="code"><div><pre><span></span><code><a id="__codelineno-24-1" name="__codelineno-24-1"></a><span class="n">rangesDF</span><span class="p">.</span><span class="na">plot</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-2" name="__codelineno-24-2"></a><span class="w">    </span><span class="n">groupBy</span><span class="p">(</span><span class="n">category</span><span class="p">)</span><span class="w"> </span><span class="p">{</span>
<a id="__codelineno-24-3" name="__codelineno-24-3"></a><span class="w">        </span><span class="n">densityPlot</span><span class="p">(</span><span class="n">range</span><span class="p">)</span>
<a id="__codelineno-24-4" name="__codelineno-24-4"></a><span class="w">    </span><span class="p">}</span>
<a id="__codelineno-24-5" name="__codelineno-24-5"></a><span class="p">}</span>
</code></pre></div></td></tr></table></div>
<!---END-->

<p><img alt="GroupBy in Plot" src="guideDensityGroupByDensityPlot.svg" /></p>
<p><seealso style="cards">
       <category ref="example-ktnb">
           <a href="https://github.com/Kotlin/kandy/blob/main/examples/notebooks/lets-plot/guides/density_plot.ipynb" summary="View the notebook on our GitHub repository">GitHub Notebook</a>
           <a href="https://datalore.jetbrains.com/report/static/KQKedA4jDrKu63O53gEN0z/hnLsJe6iBhGTTqjTbszDDy" summary="Experiment with this example on Datalore">Datalore Notebook</a>
       </category>
</seealso></p>







  
  






                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
      <div class="md-progress" data-md-component="progress" role="progressbar"></div>
    
    
    <script id="__config" type="application/json">{"base": "../../../../..", "features": ["navigation.instant", "navigation.instant.prefetch", "navigation.instant.progress", "navigation.path", "navigation.tabs", "navigation.tracking", "search.suggest"], "search": "../../../../../assets/javascripts/workers/search.f886a092.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../../../assets/javascripts/bundle.d7c377c4.min.js"></script>
      
        <script src="../../../../../javascript/katex.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/katex.min.js"></script>
      
        <script src="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.7/contrib/auto-render.min.js"></script>
      
        <script src="../../../../../js/open_in_new_tab.js"></script>
      
    
  </body>
</html>